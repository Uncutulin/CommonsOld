xhrError = function (a) { showError(a.responseText) }; function showError(a) { var t = $("#dataConfirmModal"); console.log("open " + t.hasClass("in")); t.addClass("modal-error"); t.find("#dataConfirmText").text(a); t.find("#dataConfirmNo").text("Volver"); t.find("#dataConfirmTitle").text("Error"); t.find("#dataConfirmIcon").attr("class", "fa fa-exclamation"); t.modal("show"); document.querySelectorAll(".modal-backdrop").forEach(function (a) { a.remove() }) } $(document).ready(function () { $("a[data-confirmbodytext], a[data-conf]").each(function () { var a = $(this).attr("onclick"); $(this).attr("data-onclick", a); this.removeAttribute("onclick") }); $("body").on("click", "a[data-confirmbodytext], a[data-conf]", function (a) { a.stopPropagation(); a.preventDefault(); a.stopImmediatePropagation(); var t = $(this).attr("href"); var r = $(this).attr("data-onclick"); var i = $(this).attr("data-ajax"); var o = $("#dataConfirmModal"); o.removeClass("modal-error"); o.find("#dataConfirmText").text($(this).attr("data-confirmbodytext")); if ($(this).attr("data-conf")) { o.find("#dataConfirmText").text($(this).attr("data-conf")) } o.find("#dataConfirmYes").attr("href", t); if (r || i) { o.find("#dataConfirmYes").attr("data-dismiss", "modal") } if (r) { o.find("#dataConfirmYes").attr("onclick", r) } if (i) { o.find("#dataConfirmYes").attr("data-ajax", i); var n = $(this).attr("data-ajax-complete"); var d = $(this).attr("data-ajax-success"); var e = $(this).attr("data-ajax-failure"); var f = $(this).attr("data-ajax-mode"); var s = $(this).attr("data-ajax-update"); o.find("#dataConfirmYes").attr("data-ajax-complete", n); o.find("#dataConfirmYes").attr("data-ajax-success", d); o.find("#dataConfirmYes").attr("data-ajax-failure", e); o.find("#dataConfirmYes").attr("data-ajax-mode", f); o.find("#dataConfirmYes").attr("data-ajax-update", s) } var c = $(this).attr("data-confirmyestext"); if (c) { o.find("#dataConfirmYes").text(c) } else { o.find("#dataConfirmYes").text("Confirmar") } o.find("#dataConfirmYes").text("Confirmar"); var m = $(this).attr("data-confirmnotext"); if (m) { o.find("#dataConfirmNo").text(m) } else { o.find("#dataConfirmNo").text("Cancelar") } var l = $(this).attr("data-confirmtitletext"); if (l) { o.find("#dataConfirmTitle").text(l) } else { o.find("#dataConfirmTitle").text("¿Está seguro?") } var x = $(this).attr("data-confirmicon"); switch (x) { case "Warning": o.find("#dataConfirmIcon").attr("class", "fa fa-exclamation"); break; case "Success": o.find("#dataConfirmIcon").attr("class", "fa fa-check"); break; case "Info": o.find("#dataConfirmIcon").attr("class", "fa fa-exclamation"); break; case "Danger": o.find("#dataConfirmIcon").attr("class", "fa fa-remove"); break; default: o.find("#dataConfirmIcon").attr("class", "fa fa-exclamation") }o.modal("show"); return false }) });